<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Continuous Voice to Text</title>

<style>
body {
    font-family: Arial;
    background: linear-gradient(135deg, #667eea, #764ba2);
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0;
}
.container {
    background: white;
    padding: 20px;
    border-radius: 15px;
    width: 420px;
    text-align: center;
}
textarea {
    width: 100%;
    height: 150px;
    font-size: 16px;
    padding: 10px;
    margin-bottom: 10px;
}
button {
    padding: 10px 15px;
    margin: 5px;
    border: none;
    border-radius: 8px;
    background: #667eea;
    color: white;
    cursor: pointer;
}
.status {
    font-size: 14px;
    color: #555;
}
</style>
</head>
<body>

<div class="container">
    <h3>ðŸŽ¤ Voice â†’ Text</h3>

    <textarea id="output" placeholder="Start speaking..."></textarea>

    <select id="language">
        <option value="en-US">English</option>
        <option value="ta-IN">Tamil</option>
    </select>

    <br>

    <button onclick="startListening()">Start</button>
    <button onclick="stopListening()">Stop</button>

    <p class="status" id="status">Idle</p>
</div>

<script>
let recognition;
let finalTranscript = "";

const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

if (SpeechRecognition) {
    recognition = new SpeechRecognition();
    recognition.continuous = true;
    recognition.interimResults = true; // âœ… Live text
} else {
    alert("Speech Recognition not supported");
}

function startListening() {
    finalTranscript = "";
    recognition.lang = document.getElementById("language").value;
    recognition.start();
    document.getElementById("status").innerText = "Listening...";
}

function stopListening() {
    recognition.stop();
    document.getElementById("status").innerText = "Stopped";
}

recognition.onresult = function (event) {
    let interimTranscript = "";

    for (let i = event.resultIndex; i < event.results.length; i++) {

        const transcript = event.results[i][0].transcript;

        if (event.results[i].isFinal) {
            finalTranscript += transcript + " ";
        } else {
            interimTranscript += transcript;
        }
    }

    document.getElementById("output").value =
        finalTranscript + interimTranscript;
};

recognition.onerror = function (event) {
    document.getElementById("status").innerText = "Error: " + event.error;
};

recognition.onend = function () {
    document.getElementById("status").innerText = "Stopped";
};
</script>

</body>
</html>
